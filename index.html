<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ESPORTS CHALLENGE HSWP 2026</title>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,system-ui;
  margin:0;
  background:#fff;
}
h1{text-align:center;font-size:18px;margin:12px 0}
.tabs{text-align:center;margin-bottom:8px}
.tab{
  padding:8px 18px;
  border-radius:20px;
  border:1px solid #ddd;
  background:#c9a24d;
  font-weight:600;
}

.container{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  padding:10px;
}
.card{
  flex:1;
  min-width:340px;
  border:1px solid #e5e5e5;
  border-radius:16px;
  padding:10px;
}
.card h3{margin:6px 0}

.map-tabs button{
  padding:6px 14px;
  border-radius:20px;
  border:1px solid #ddd;
  background:#fff;
  margin-right:6px;
}
.map-tabs .active{background:#c9a24d}

button{
  border:none;
  padding:6px 14px;
  border-radius:14px;
  font-size:12px;
  cursor:pointer;
}
.lock{background:#27ae60;color:#fff}
.unlock{background:#7f8c8d;color:#fff}
.reset{background:#c0392b;color:#fff}

table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}
th,td{
  padding:6px;
  border-bottom:1px solid #eee;
  text-align:center;
}
td:first-child,th:first-child{text-align:left}

.kill-input{
  width:42px;
  padding:4px;
  border-radius:6px;
  border:1px solid #ccc;
  text-align:center;
  background:#f7f7f7;
}

/* ===== POPUP KILL ===== */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  display:none;
  align-items:flex-end;
  z-index:999;
}
.kill-modal{
  background:#f4f4f6;
  width:100%;
  max-width:420px;
  margin:auto;
  border-radius:18px 18px 0 0;
  padding:14px;
}
.kill-title{text-align:center;font-weight:600}
.kill-wheel{
  display:flex;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  padding:10px 0;
}
.kill-wheel::-webkit-scrollbar{display:none}
.kill-item{
  flex:0 0 80px;
  text-align:center;
  font-size:26px;
  font-weight:600;
  color:#aaa;
  scroll-snap-align:center;
}
.kill-item.active{color:#000;font-size:34px}
.kill-actions{
  display:flex;
  gap:10px;
}
.kill-actions button{
  flex:1;
  padding:10px;
  border-radius:14px;
}
.btn-ok{background:#c9a24d;font-weight:bold}
.btn-cancel{background:#ddd}
</style>
</head>

<body>

<h1>ESPORTS CHALLENGE HSWP 2026</h1>

<div class="tabs">
  <span class="tab">DASHBOARD</span>
</div>

<div class="container">

<!-- MAP STANDING -->
<div class="card">
  <h3>MAP STANDING</h3>

  <div class="map-tabs">
    <button class="active">Erangel</button>
    <button>Miramar</button>
    <button>Rondo</button>
  </div>

  <div style="margin:8px 0">
    <button id="lockBtn" class="lock" onclick="toggleLock()">LOCK</button>
    <button class="reset" onclick="resetMap()">RESET MAP</button>
  </div>

  <table id="mapTable">
    <thead>
      <tr>
        <th>No</th><th>Team</th><th>WWCD</th>
        <th>Placement</th><th>Kill</th><th>Total</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- ALL STANDING -->
<div class="card">
  <h3>ALL STANDING</h3>
  <table id="allTable">
    <thead>
      <tr>
        <th>No</th><th>Team</th><th>WWCD</th>
        <th>Placement</th><th>Kill</th><th>Total</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

</div>

<!-- POPUP KILL -->
<div id="killOverlay" class="overlay">
  <div class="kill-modal">
    <div class="kill-title">SET KILL</div>
    <div class="kill-wheel" id="killWheel"></div>
    <div class="kill-actions">
      <button class="btn-cancel" onclick="closeKill()">Cancel</button>
      <button class="btn-ok" onclick="saveKill()">Save</button>
    </div>
  </div>
</div>

<audio id="beep">
  <source src="data:audio/wav;base64,UklGRhQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQAAAAA=">
</audio>

<script>
const teams=[
"OL","Zentra","JURNEE 52","HEe ESPORT","AING BALANG",
"MANTARAY GIANT","SolJar","Yelnats","Martabak Esport",
"THE RED X","SANTAi KiLLERs","TOP PANDA","ROBOX","DND",
"FAM UNITED","REDBULL 26 ESPORTS"
];

let locked=false;

let mapData=teams.map((t,i)=>({
  team:t, wwcd:i==0?1:0, place:Math.max(10-i,0), kill:0
}));

let allData=JSON.parse(localStorage.getItem("allData"))
|| teams.map(t=>({team:t,wwcd:0,place:0,kill:0,total:0}));

function renderMap(){
  const tb=document.querySelector("#mapTable tbody");
  tb.innerHTML="";
  mapData.forEach((r,i)=>{
    r.total=r.place+r.kill;
    tb.innerHTML+=`
    <tr>
      <td>${i+1}</td>
      <td>${r.team}</td>
      <td>${r.wwcd?"WWCD":""}</td>
      <td>${r.place}</td>
      <td>
        <input class="kill-input" readonly value="${r.kill}"
        onclick="openKill(${i})">
      </td>
      <td>${r.total}</td>
    </tr>`;
  });
}

function renderAll(){
  const tb=document.querySelector("#allTable tbody");
  tb.innerHTML="";
  allData.forEach((r,i)=>{
    tb.innerHTML+=`
    <tr>
      <td>${i+1}</td><td>${r.team}</td>
      <td>${r.wwcd}</td>
      <td>${r.place}</td>
      <td>${r.kill}</td>
      <td>${r.total}</td>
    </tr>`;
  });
}

function toggleLock(){
  document.getElementById("beep").play();
  locked=!locked;
  const btn=document.getElementById("lockBtn");
  btn.textContent=locked?"UNLOCK":"LOCK";
  btn.className=locked?"unlock":"lock";

  if(locked){
    mapData.forEach((r,i)=>{
      allData[i].wwcd+=r.wwcd;
      allData[i].place+=r.place;
      allData[i].kill+=r.kill;
      allData[i].total=allData[i].place+allData[i].kill;
    });
    localStorage.setItem("allData",JSON.stringify(allData));
    renderAll();
    alert("Map dikunci & data disimpan");
  }
}

function resetMap(){
  if(!confirm("Reset MAP ini?"))return;
  document.getElementById("beep").play();
  mapData.forEach(r=>r.kill=0);
  renderMap();
}

let currentIndex=0,selectedKill=0;

function openKill(i){
  currentIndex=i;
  selectedKill=mapData[i].kill;
  const w=document.getElementById("killWheel");
  w.innerHTML="";
  for(let k=0;k<=99;k++){
    w.innerHTML+=`<div class="kill-item ${k==selectedKill?"active":""}">${k}</div>`;
  }
  setTimeout(()=>w.scrollLeft=selectedKill*80,50);
  document.getElementById("killOverlay").style.display="flex";
  w.onscroll=()=>highlight(w);
}

function highlight(w){
  const c=w.scrollLeft+w.offsetWidth/2;
  [...w.children].forEach((el,i)=>{
    const e=el.offsetLeft+el.offsetWidth/2;
    el.classList.toggle("active",Math.abs(e-c)<40);
    if(Math.abs(e-c)<40)selectedKill=i;
  });
}

function saveKill(){
  mapData[currentIndex].kill=selectedKill;
  closeKill();
  renderMap();
}

function closeKill(){
  document.getElementById("killOverlay").style.display="none";
}

renderMap();
renderAll();
</script>

</body>
</html>
